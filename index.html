<!doctype html>



  


<html class="theme-next mist use-motion" lang="ja">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<link href="https://fonts.googleapis.com/css?family=Noto+Sans|Noto+Serif" rel="stylesheet">



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Noto:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="機械学習, 日本株, 米国株, 外国為替" />





  <link rel="alternate" href="/atom.xml" title="有為転変" type="application/atom+xml" />




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.0" />






<meta name="description" content="メモ書きです">
<meta property="og:type" content="website">
<meta property="og:title" content="有為転変">
<meta property="og:url" content="http://fanannan.github.io/index.html">
<meta property="og:site_name" content="有為転変">
<meta property="og:description" content="メモ書きです">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="有為転変">
<meta name="twitter:description" content="メモ書きです">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    sidebar: {"position":"right","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: 'author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://fanannan.github.io/"/>





  <title> 有為転変 </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="ja">

  
<script>
  window.fbAsyncInit = function() {
    FB.init({
      appId      : '',
      xfbml      : true,
      version    : 'v2.6'
    });
  };

  (function(d, s, id){
     var js, fjs = d.getElementsByTagName(s)[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement(s); js.id = id;
     js.src = "//connect.facebook.net/ja/sdk.js";
     fjs.parentNode.insertBefore(js, fjs);
   }(document, 'script', 'facebook-jssdk'));
</script>











  
  
    
  

  <div class="container one-collumn sidebar-position-right 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">有為転変</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle"></p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            ホーム
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            過去記事
          </a>
        </li>
      

      


    </ul>
  

  
</nav>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-91008759-1', 'auto');
  ga('send', 'pageview');

</script>


 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://fanannan.github.io/2017/02/09/gold-on-fridays/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="fanannan">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/avatar.gif">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="有為転変">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="有為転変" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/02/09/gold-on-fridays/" itemprop="url">
                  週末に金が上がる傾向があることの確認
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">投稿日</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-02-09T07:36:14+09:00">
                2017-02-09
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">post.in</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/コモディティ/" itemprop="url" rel="index">
                    <span itemprop="name">コモディティ</span>
                  </a>
                </span>

                
                
                  、
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/コモディティ/金/" itemprop="url" rel="index">
                    <span itemprop="name">金</span>
                  </a>
                </span>

                
                
                  、
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/コモディティ/金/米国株/" itemprop="url" rel="index">
                    <span itemprop="name">米国株</span>
                  </a>
                </span>

                
                
                  、
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/コモディティ/金/米国株/アノマリー/" itemprop="url" rel="index">
                    <span itemprop="name">アノマリー</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <a href="/2017/02/09/gold-on-fridays/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count fb-comments-count" data-href="http://fanannan.github.io/2017/02/09/gold-on-fridays/" itemprop="commentCount">0</span> comments
                </a>
              </span>
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <hr>
<h2 id="この記事に書いてあること"><a href="#この記事に書いてあること" class="headerlink" title="この記事に書いてあること"></a>この記事に書いてあること</h2><p>・金価格が金曜日から月曜にかけて上がる傾向は確認できたが、分散が大きくそれだけではなんとも。<br>・木曜日の状況を加味すると、傾向が強まる印象はあるので、条件を検討すれば有用かもしれないが、実用に向くほどではない。</p>
<hr>
<h2 id="契機"><a href="#契機" class="headerlink" title="契機"></a>契機</h2><p>週末や休日の前に、金融資産の価格がどのように動くかは、その時々の市場の情勢を象徴的に示すことがあるように思える時がある。週末や休日の間、リスク資産を持ちたくないという気持ちが強ければ、金やVIX、国債などに動きがあることも考えられる。</p>
<p>いろいろな金融資産について、曜日別のアノマリーについて検討した論文( <a href="https://papers.ssrn.com/sol3/papers.cfm?abstract_id=2912112" target="_blank" rel="external">https://papers.ssrn.com/sol3/papers.cfm?abstract_id=2912112</a> )<br>において、金が一番強い（確実性が高そうな）曜日別アノマリーがあり、金曜日に値上がりをするという記載があったので、簡単に確かめてみることにした。</p>
<h2 id="データ"><a href="#データ" class="headerlink" title="データ"></a>データ</h2><p>データにはYahoo Financeの日次データを利用した。金価格の動向を反映する資産としては、金のETFであるGLD、金鉱株のETFであるGLDを用いた。</p>
<h2 id="曜日別動向"><a href="#曜日別動向" class="headerlink" title="曜日別動向"></a>曜日別動向</h2><p>月曜日を１、金曜日を５とした曜日別の変化率は下記のチャートの通りである。論文で有意性が確認されている通り、確かにGLDは金曜日に（木曜日終値から金曜日終値にかけて）一番上げているが、平均は14bpと小さく、標準偏差は124bpと非常にぶれが大きい。また、GDXに関しては月曜日に下げ、水曜日に上げる傾向のほうが、金曜日の動きよりも大きい。</p>
<table border="0"><tr><br><img src="/2017/02/09/gold-on-fridays/dists.png" title="金ETFおよび金鉱株ETFの曜日別価格変化" width="1200"><br></tr></table>

<p>次に、金曜日の前日である木曜日に、S&amp;P500やVIX、金融株のETFであるXLFがどう動いたかを横軸とし、縦軸に金曜日のGLDとGDXの変化を見ると、木曜日にVIXがあげたら金曜日に金が買われる傾向が若干強いように見える。ただ、ばらつきが大きいことには変わりがないので、これだけでは有用とは言えない。色々な要素を組み合わせると、傾向はもっと強くなるかもしれないが、インドや中国、中東の金需要など季節要因となる重要な要素は多いので、まあ、こんなものというところであろう。</p>
<table border="0"><tr><br><img src="/2017/02/09/gold-on-fridays/scatters.png" title="木曜日のS&P500、VIX、XLFの動きと金ETFおよび金鉱株ETFの金曜日の価格変化" width="1200"><br></tr></table>


          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://fanannan.github.io/2017/02/09/intraday-pattern/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="fanannan">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/avatar.gif">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="有為転変">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="有為転変" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/02/09/intraday-pattern/" itemprop="url">
                  米国株の朝の価格動向は夕方の価格動向に影響するか
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">投稿日</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-02-09T07:35:41+09:00">
                2017-02-09
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">post.in</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/米国株/" itemprop="url" rel="index">
                    <span itemprop="name">米国株</span>
                  </a>
                </span>

                
                
                  、
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/米国株/アノマリー/" itemprop="url" rel="index">
                    <span itemprop="name">アノマリー</span>
                  </a>
                </span>

                
                
                  、
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/米国株/アノマリー/イントラディ/" itemprop="url" rel="index">
                    <span itemprop="name">イントラディ</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <a href="/2017/02/09/intraday-pattern/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count fb-comments-count" data-href="http://fanannan.github.io/2017/02/09/intraday-pattern/" itemprop="commentCount">0</span> comments
                </a>
              </span>
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <hr>
<h2 id="この記事に書いてあること"><a href="#この記事に書いてあること" class="headerlink" title="この記事に書いてあること"></a>この記事に書いてあること</h2><p>・米国株式市場において、朝の時間帯の株価の動きが、夕方の株価の動きと相関を持つという論文が幾つかある。<br>・しかし、運用のシミュレーションをすると上手く行かないという報告があるので、違う見方をしてみたが、やはり駄目そうだ。<br>・とは言え、個別銘柄では難しいにしても、指数で精査すれば何か面白いことがあるかもしれない。</p>
<hr>
<h2 id="契機"><a href="#契機" class="headerlink" title="契機"></a>契機</h2><p>米国株式市場において、朝オープン直後の時間帯、例えば9:30から10:00までの価格の動きと、夕方の時間帯15:30から16:00までの価格の動きに正の相関が高いということを報告した論文をこれまで幾つか目にしてきた。</p>
<p>朝の時間帯の取り方にはバリエーションが色々あり、12:00までとしたり、前日の終値からの変化を見たりするものもある。夕方の時間帯については、15:00から15:30までの動きは、朝の時間帯と逆相関、すなわち、15:30から16:00までの時間帯とも逆相関が見られるという見解で概ね一致している。</p>
<p>今回参照した論文（ <a href="https://papers.ssrn.com/sol3/papers.cfm?abstract_id=2905713" target="_blank" rel="external">https://papers.ssrn.com/sol3/papers.cfm?abstract_id=2905713</a> ）では、この特性を利用して、運用のシミュレーションを試みているが、うまく行っていない。そこでは、日次で朝の時間帯に値動きの大きい銘柄を選んで、当該銘柄を夕方取引するとどうなるかというやり方がなされている。<br>ここでは、そもそも朝の時間帯と夕方の時間帯で相関の高い銘柄とそうでない銘柄が存在するのではないかと考えて、状況を確認してみたい。</p>
<h2 id="データ"><a href="#データ" class="headerlink" title="データ"></a>データ</h2><p>データにはStooqの５分足データを使用した。対象銘柄は、Stooqに収録されている米国市場の全銘柄（ETFを含む）で、対象期間としては、これまでダウンロードして手元にあるStooqのデータから過去２年分から利用できた範囲（銘柄によりばらつきあり）である。流動性のない銘柄では、５分足の値が存在しないことがあるが、その場合は、当該日のデータそのものが存在しないこととした。</p>
<h2 id="検討結果"><a href="#検討結果" class="headerlink" title="検討結果"></a>検討結果</h2><p>銘柄別に日次で、9:30から10:00、9:30から12:00、12:00から13:00のそれぞれの時間帯の値動きと15:30から16:00までの値動きの相関を算出し、最も高いものを２つ選び出し時間帯別に左から並べたのが、下記のチャートである。<br>一番相関が高かった上段のEEPでも相関は63%、下段のPAGPで58%で、それも見た通りの程度である。他の銘柄では、ばらつきはもっと大きく、このような多少でも相関が見えるような感じにはならない。銘柄別に見て、特に相関が高いグループがあるようでもないので、銘柄を特定することによってシミュレーションの成績が大きく改善するとは考えにくい。<br>ただし、全体として、朝と夕方の米国株式市場の動きに関係がありそうなのは変わりがないので、指数の動きについては掘り下げて見ると面白いことがあるかもしれない。</p>
<table border="0"><tr><br><img src="/2017/02/09/intraday-pattern/eep.png" title="EEP" width="1200"><br></tr><tr><br><img src="/2017/02/09/intraday-pattern/pagp.png" title="PAGP" width="1200"><br>

</tr></table>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://fanannan.github.io/2017/02/08/vix-range/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="fanannan">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/avatar.gif">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="有為転変">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="有為転変" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/02/08/vix-range/" itemprop="url">
                  VIXの上下幅
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">投稿日</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-02-08T17:11:22+09:00">
                2017-02-08
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">post.in</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/VIX/" itemprop="url" rel="index">
                    <span itemprop="name">VIX</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <a href="/2017/02/08/vix-range/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count fb-comments-count" data-href="http://fanannan.github.io/2017/02/08/vix-range/" itemprop="commentCount">0</span> comments
                </a>
              </span>
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="VIXのピークとボトムの動き"><a href="#VIXのピークとボトムの動き" class="headerlink" title="VIXのピークとボトムの動き"></a>VIXのピークとボトムの動き</h2><p>VIXの回帰性について、色々探ってみたがなかなか面白い結果は得られなかった。しかし、長い目でVIXの推移を眺めると、過去のピークやボトムの水準が長い間影響し続けるように見えてならない。</p>
<p>理論的背景は全く無いが、過去営業日30、60、250日の間の日次の高値の90%タイル値、安値の10%タイル値を取って線を引いてみると、なかなかそれらしいガイドラインのようなものができる。当然のことながら、突発的に重大な事象があれば、高値の線を大きく超えることもああるだろうし、どういうことが起きるかわからない。ただ、それでも一定のレンジを示してくれるという意味で、少なくとも気持ちうえでは、こういうものも有用かもしれない。</p>
<table border="0"><tr><br><img src="/2017/02/08/vix-range/vix_range.png" title="" width="1200"><br></tr></table>

<p>各線の値に対して、その後３日間と５日間のVIXの変動をチャートにしてみると次のようになる。<br>左側から３つの高値安値の幅の中でVIX指数の現在の位置を比較しているものが有用だと思っていたが、安値のほうに集まりすぎていて、期待ほどにはぱっとしないものの、高値に近づくに連れて下落方向に行く傾向は見て取れる。左から４番目の250day-high ratioは、横軸にVIX指数の過去営業日250日の日次の高値の90%タイル値とVIX指数の値の比の対数、縦軸にVIXの５日間対数変化率をプロットしたもので、ばらつきは大きいものの、かなりはっきりとした相関が見える。５、６番目の期間の短いもののほうが相関が弱いように見える。一方、右側３つの安値側のチャートでは、期間の長いものよりも低いものの方が使えそうな感じである。</p>
<table border="0"><tr><br><img src="/2017/02/08/vix-range/vix_range_corr.png" title="" width="1200"><br></tr></table>

<pre><code>#!/usr/bin/env python
# -*- coding: utf-8 -*-

import numpy as np
import pandas as pd
import pandas.io as io
import talib as ta
import datetime as dt
from pandas.io.data import DataReader
from joblib import Memory
import matplotlib as mpl
import matplotlib.pyplot as plt
#
memory = Memory(&apos;/tmp/&apos;)
TICKER_LIST = [&apos;^VIX&apos;]


@memory.cache()
def read_yahoo_data(tickers):
    lis = list()
    for ticker in tickers:
        df = DataReader(ticker, &apos;yahoo&apos;)
        adjustment = df[&apos;Adj Close&apos;]/df[&apos;Close&apos;]
        df[&apos;Open&apos;] *= adjustment
        df[&apos;High&apos;] *= adjustment
        df[&apos;Low&apos;] *= adjustment
        df[&apos;Close&apos;] = df[&apos;Adj Close&apos;]
        del df[&apos;Adj Close&apos;]
        for c in df.columns:
            df = df.rename(columns={c: ticker.replace(&apos;^&apos;, &apos;&apos;).lower()+&apos;_&apos;+c.replace(&apos; &apos;, &apos;&apos;).lower()})
        lis.append(df)
    df_aggregated = pd.concat(lis, axis=1)
    return df_aggregated


def get_vix_bands(df):
    df_vix_high = df[&apos;vix_high&apos;]
    df_vix_low = df[&apos;vix_low&apos;]
    df_vix_close = df[&apos;vix_close&apos;]
    df_top = df_vix_high.rolling(window=250, min_periods=3).quantile(0.9)
    df_higher = df_vix_high.rolling(window=60, min_periods=3).quantile(0.9)
    df_high = df_vix_high.rolling(window=30, min_periods=3).quantile(0.9)
    df_low = df_vix_low.rolling(window=30, min_periods=3).quantile(0.1)
    df_lower = df_vix_low.rolling(window=60, min_periods=3).quantile(0.1)
    df_bottom = df_vix_low.rolling(window=250, min_periods=3).quantile(0.1)
    return df_vix_high, df_vix_low, df_vix_close, df_top, df_higher, df_high, df_low, df_lower, df_bottom


def draw_vix_bands(df, todays_high=None, todays_low=None, todays_close=None):
    df = df.copy()
    df_latest = pd.DataFrame([], index=[], columns=[&apos;vix_high&apos;, &apos;vix_low&apos;, &apos;vix_close&apos;])
    if todays_high is not None or todays_low is not None or todays_close is not None:
        today = dt.date.today()
        df_latest = pd.DataFrame([[todays_high, todays_low, todays_close],
                                     [np.nan, np.nan, np.nan],
                                     [np.nan, np.nan, np.nan],
                                     [np.nan, np.nan, np.nan],
                                     [np.nan, np.nan, np.nan],
                                     ],
                              index=[today+dt.timedelta(days=n) for n in range(0, 5)],
                              columns=[&apos;vix_high&apos;, &apos;vix_low&apos;, &apos;vix_close&apos;])
        df = df.append(df_latest)
    df_vix_high, df_vix_low, df_vix_close, df_top, df_higher, df_high, df_low, df_lower, df_bottom = get_vix_bands(df)
    x = df.index
    fig = plt.figure(figsize=(20,6))
    ax = fig.add_subplot(1,1,1)
    ax2 = ax.twinx()
    ax.set_title(&apos;vix range&apos;)
    ax.set_ylim((10, 50))
    ax2.set_ylim((10, 50))
    ax.set_xlim((x[0], x[-1]))
    ax2.set_xlim((x[0], x[-1]))
    ax2.fill_between(x, df_top.shift(1).values, df_bottom.shift(1).values, color=&apos;#888888&apos;, alpha=.1)
    ax2.fill_between(x, df_higher.shift(1).values, df_lower.shift(1).values, color=&apos;#888888&apos;, alpha=.2)
    ax2.fill_between(x, df_high.shift(1).values, df_low.shift(1).values, color=&apos;#888888&apos;, alpha=.4)
    ax.plot(x, df_top.shift(1).values, color=&apos;#ff0000&apos;, alpha=0.4)
    ax.plot(x, df_higher.shift(1).values, color=&apos;#dd0000&apos;, alpha=0.3)
    ax.plot(x, df_high.shift(1).values, color=&apos;#880000&apos;, alpha=0.3)
    ax.plot(x, df_low.shift(1).values, color=&apos;#008800&apos;, alpha=0.3)
    ax.plot(x, df_lower.shift(1).values, color=&apos;#00dd00&apos;, alpha=0.3)
    ax.plot(x, df_bottom.shift(1).values, color=&apos;#00ff00&apos;, alpha=0.4)
    ax.plot(x, df_vix_close.values, linewidth=1.7, color=&apos;#0000ff&apos;, alpha=0.9)
    ax.tick_params(axis=&apos;both&apos;, direction=&apos;out&apos;, width=1, length=5, labelsize=14, pad=8)
    plt.yticks([10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 25, 30, 35, 40, 45, 50])
    ax.grid()
    # ax.text(0, 0, &apos;top {}&apos;.format(df_top.shift(1).values[-15]),
    #         horizontalalignment=&apos;center&apos;,
    #         verticalalignment=&apos;bottom&apos;)
    #ax.annotate(&apos;figure pixels&apos;, xy=(x[-1], close.values[-1]), xycoords=&apos;figure pixels&apos;)
    #print(df.tail(12))
    offset = -len(df_latest)
    p = df_vix_close.values[offset]
    print(&apos;top   : {0:2.2f}({1:02.2f}%)&apos;.format(df_top.shift(1).values[offset],
                            A                   (df_top.shift(1).values[offset]/p-1)*100))
    print(&apos;upper : {0:2.2f}({1:02.2f}%)&apos;.format(df_higher.shift(1).values[offset],
                                               (df_higher.shift(1).values[offset]/p-1)*100))
    print(&apos;up    : {0:2.2f}({1:02.2f}%)&apos;.format(df_high.shift(1).values[offset],
                                               (df_high.shift(1).values[offset]/p-1)*100))
    print(&apos;low   : {0:2.2f}({1:02.2f}%)&apos;.format(df_low.shift(1).values[offset],
                                               (df_low.shift(1).values[offset]/p-1)*100))
    print(&apos;lower : {0:2.2f}({1:02.2f}%)&apos;.format(df_lower.shift(1).values[offset],
                                               (df_lower.shift(1).values[offset]/p-1)*100))
    print(&apos;bottom: {0:2.2f}({1:02.2f}%)&apos;.format(df_bottom.shift(1).values[offset],
                                               (df_bottom.shift(1).values[offset]/p-1)*100))
    print(&apos;last  : {0:2.2f}&apos;.format(p))
    fig.savefig(&apos;/tmp/vix_range_band.png&apos;)
    plt.show()

def identity(x):
    return x

def prepare_data(df, config):
    df = df.copy().dropna().drop_duplicates()
    #
    df_vix_high, df_vix_low, df_vix_close, df_top, df_higher, df_high, df_low, df_lower, df_bottom = get_vix_bands(df)
    for lookback in range(-5, 5+1):
        df[&apos;pc{}&apos;.format(lookback)] = (df_vix_close.shift(lookback)/df_vix_close.shift(lookback+1)).apply(np.log)
    for lookback in range(1, 3+1):
        df[&apos;rc{}&apos;.format(lookback*10)] = (df_vix_close/df_vix_close.shift(lookback)).apply(np.log)
    for df_add, f, name in [
        ((df_vix_close-df_bottom)/(df_top-df_bottom), identity, &apos;250day band&apos;),
        ((df_vix_close-df_lower)/(df_higher-df_lower), identity, &apos;60day band&apos;),
        ((df_vix_close-df_low)/(df_high-df_low), identity, &apos;30day band&apos;),
        (df_top/df_vix_close, np.log, &apos;250day-high ratio&apos;),
        (df_higher/df_vix_close, np.log, &apos;50day-high ratio&apos;),
        (df_high/df_vix_close, np.log, &apos;30day-high ratio&apos;),
        (df_vix_close/df_bottom, np.log, &apos;30day-low ratio&apos;),
        (df_vix_close/df_lower, np.log, &apos;60day-low ratio&apos;),
        (df_vix_close/df_low, np.log, &apos;250day-low ratio&apos;),
        ((df_vix_high-df_vix_close)/(df_vix_high-df_vix_low), identity, &apos;daily_high_low_position&apos;),]:
        s = df_add.apply(f)
        s.name = name
        df = pd.concat([df, s], axis=1)
    return df

if True:
    df = read_yahoo_data(TICKER_LIST)
    print(df)
    draw_vix_bands(df, todays_high=13.0, todays_low=12.0, todays_close=12.15)
    #
    df_data = prepare_data(df, {})
    fig = plt.figure(figsize=(20,4))
    bands = [&apos;250day band&apos;, &apos;60day band&apos;,
           &apos;30day band&apos;, &apos;250day-high ratio&apos;, &apos;50day-high ratio&apos;,
           &apos;30day-high ratio&apos;, &apos;30day-low ratio&apos;, &apos;60day-low ratio&apos;,
           &apos;250day-low ratio&apos;,]
    for i, k in enumerate(bands):
        ax = fig.add_subplot(1, len(bands), i+1)
        ax.grid()
        ax.title.set_text(k)
        ax.scatter(df_data[k], df_data[&apos;pc-5&apos;], s=4, alpha=0.2)
    exit()
</code></pre>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://fanannan.github.io/2017/02/08/taxday-anomaly/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="fanannan">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/avatar.gif">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="有為転変">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="有為転変" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/02/08/taxday-anomaly/" itemprop="url">
                  タックスディのアノマリー
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">投稿日</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-02-08T14:55:58+09:00">
                2017-02-08
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">post.in</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/米国株/" itemprop="url" rel="index">
                    <span itemprop="name">米国株</span>
                  </a>
                </span>

                
                
                  、
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/米国株/アノマリー/" itemprop="url" rel="index">
                    <span itemprop="name">アノマリー</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <a href="/2017/02/08/taxday-anomaly/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count fb-comments-count" data-href="http://fanannan.github.io/2017/02/08/taxday-anomaly/" itemprop="commentCount">0</span> comments
                </a>
              </span>
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <hr>
<h2 id="この記事に書いてあること"><a href="#この記事に書いてあること" class="headerlink" title="この記事に書いてあること"></a>この記事に書いてあること</h2><p>・米国の確定申告締切日（”タックスディ”）から翌日にかけて、米国の株価指数が過去26年平均で51bp上昇するということが確認できた。</p>
<hr>
<h2 id="タックスディのアノマリー"><a href="#タックスディのアノマリー" class="headerlink" title="タックスディのアノマリー"></a>タックスディのアノマリー</h2><p>米国の確定申告締切日（”タックスディ”）から翌日にかけて株価が上がるというアノマリーを発見したという論文（ <a href="https://papers.ssrn.com/sol3/papers.cfm?abstract_id=2910752" target="_blank" rel="external">https://papers.ssrn.com/sol3/papers.cfm?abstract_id=2910752</a> ）が出ていたので、簡単に確かめてみることにした。</p>
<h2 id="データ"><a href="#データ" class="headerlink" title="データ"></a>データ</h2><p>対象銘柄については、S&amp;P500、ダウ・ジョーンズ、VIX、ついでにVXXとVIXとし、株価データはYahoo Financeから取得する。また、タックスディの日付データは、<a href="https://www.timeanddate.com/holidays/us/tax-day" target="_blank" rel="external">https://www.timeanddate.com/holidays/us/tax-day</a> を参照して、1990年からの過去26年分について評価する。</p>
<h2 id="結果"><a href="#結果" class="headerlink" title="結果"></a>結果</h2><p>下記左のチャートは、タックスディの終値を１としたときの、前後５日間の終値の推移を示したものである。また、右のチャートはタックスディの終値からその翌日終値までの変化率の分布を示したものである。</p>
<p>S&amp;P500に関しては、平均51bpのプラスで、上げる確率もまずまず高い。それと比べると、ダウ・ジョーンズについては、比較的弱い印象だ。大型株の方が影響を受けやすいようにも思ったが、そうではないらしい。他のVIXなどは、サンプルが少なくて分布と言えるような形になってはいない。</p>
<p>なお、今年のタックスディは４月１８日ということである。はたしてどうなるか。</p>
<table border="0"><tr><br><img src="/2017/02/08/taxday-anomaly/taxday_anomaly.png" title="タックスディ前後の株価の動き" width="1200"><br></tr></table>

<pre><code>import numpy as np
import pandas as pd
import pandas_datareader.data as web
import datetime as dt
import matplotlib.pyplot as plt
#
#from IPython.core.display import display, HTML
#display(HTML(&quot;&lt;style&gt;.container { width:80% !important; }&lt;/style&gt;&quot;))

start=&apos;1990-01-01&apos;
gspc_ = web.DataReader(&apos;^GSPC&apos;, &apos;yahoo&apos;, start=start)
dji_ = web.DataReader(&apos;^DJI&apos;, &apos;yahoo&apos;, start=start)
vix_ = web.DataReader(&apos;^VIX&apos;, &apos;yahoo&apos;, start=start)
xiv_ = web.DataReader(&apos;XIV&apos;, &apos;yahoo&apos;, start=start)
vxx_ = web.DataReader(&apos;VXX&apos;, &apos;yahoo&apos;, start=start)

gspc = gspc_.copy()
dji = dji_.copy()
vix = vix_.copy()
xiv = xiv_.copy()
vxx = vxx_.copy()
#
for c in [&apos;Open&apos;, &apos;High&apos;, &apos;Low&apos;, &apos;Close&apos;]:
    xiv[c] = xiv[c]*xiv[&apos;Adj Close&apos;]/xiv[&apos;Close&apos;]
    vxx[c] = vxx[c]*vxx[&apos;Adj Close&apos;]/vxx[&apos;Close&apos;]
for c in [&apos;Open&apos;, &apos;High&apos;, &apos;Low&apos;, &apos;Adj Close&apos;, &apos;Volume&apos;]:
    del gspc[c]
    del dji[c]
    del vix[c]
    del xiv[c]
    del vxx[c]
gspc = gspc.rename(columns = {&apos;Close&apos;:&apos;sp500_Close&apos;})
dji = dji.rename(columns = {&apos;Close&apos;:&apos;dji_Close&apos;})
vix = vix.rename(columns = {&apos;Close&apos;:&apos;vix_Close&apos;})
xiv = xiv.rename(columns = {&apos;Close&apos;:&apos;xiv_Close&apos;})
vxx = vxx.rename(columns = {&apos;Close&apos;:&apos;vxx_Close&apos;})
df = pd.concat([gspc, dji, vix, vxv, xiv, vxx], axis=1)
df.columns


taxday_list = [
    &apos;1990-04-16&apos;,&apos;1991-04-15&apos;,&apos;1992-04-15&apos;,&apos;1993-04-15&apos;,&apos;1994-04-15&apos;,&apos;1995-04-17&apos;,&apos;1996-04-15&apos;,&apos;1997-04-15&apos;,&apos;1998-04-15&apos;,&apos;1999-04-15&apos;,
    &apos;2000-04-17&apos;,&apos;2001-04-16&apos;,&apos;2002-04-15&apos;,&apos;2003-04-15&apos;,&apos;2004-04-15&apos;,&apos;2005-04-15&apos;,&apos;2006-04-17&apos;,&apos;2007-04-17&apos;,&apos;2008-04-15&apos;,&apos;2009-04-15&apos;,
    &apos;2010-04-15&apos;,&apos;2011-04-18&apos;,&apos;2012-04-17&apos;,&apos;2013-04-15&apos;,&apos;2014-04-15&apos;,&apos;2015-04-15&apos;,&apos;2016-04-18&apos;,]

def search(df, taxday):
    for i, (idx, data) in enumerate(df.iterrows()):
        if idx==taxday:
            return df[i-5:i+5+1]
    raise Exception()

def read_date(s):
    return dt.datetime.strptime(s, &apos;%Y-%m-%d&apos;)

def calc(df):
    dic = dict()
    for taxday_str in taxday_list:
        taxday = read_date(taxday_str)
        df_prices = search(df, taxday)
        for column in df_prices.columns:
            if not column in dic:
                dic[column] = list()
            dic[column].append((taxday_str, (df_prices[column]/df_prices[column].values[5]).values))
    return dic

def draw(df, tickers=None):
    dic = calc(df)
    columns = dic.keys() if tickers is None else [t+&apos;_Close&apos; for t in tickers]
    fig = plt.figure(figsize=(20, 8))
    for i, k in enumerate(columns):
        v = dic[k]
        name = k[:-6] # == ticker
        ax = fig.add_subplot(len(dic), 2, i*2+1)
        ax.title.set_text(name+&apos;&apos;.format())
        ax.grid()
        for vv in v:
            taxday, rs = vv
            ax.plot(rs)
        ra = [vv[1][6] for vv in v]
        m = np.mean([vvv for vvv in ra if not np.isnan(vvv)])
        bx = fig.add_subplot(len(dic), 2, i*2+2)
        bx.title.set_text(name+&apos;: {}&apos;.format(m))
        bx.grid()
        bx.hist(ra, bins=50, range=[0.8, 1.2])

draw(df, [&apos;sp500&apos;, &apos;dji&apos;, &apos;vix&apos;, &apos;vxx&apos;, &apos;xiv&apos;])
</code></pre>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://fanannan.github.io/2017/02/02/vix-autocorr/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="fanannan">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/avatar.gif">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="有為転変">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="有為転変" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/02/02/vix-autocorr/" itemprop="url">
                  VIXの回帰性のチェック
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">投稿日</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-02-02T17:20:48+09:00">
                2017-02-02
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">post.in</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/VIX/" itemprop="url" rel="index">
                    <span itemprop="name">VIX</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <a href="/2017/02/02/vix-autocorr/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count fb-comments-count" data-href="http://fanannan.github.io/2017/02/02/vix-autocorr/" itemprop="commentCount">0</span> comments
                </a>
              </span>
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <hr>
<h2 id="この記事に書いてあること"><a href="#この記事に書いてあること" class="headerlink" title="この記事に書いてあること"></a>この記事に書いてあること</h2><p>・VIXの回帰性を確認するために、ハースト指数、リアプノフ指数、偏自己相関などを評価したが、ぱっとしなかった。<br>・とりわけ、ハースト指数、リアプノフ指数の評価には、かなりのデータ数が必要なので、日次のデータでは無理がある。<br>・偏自己相関は使えそうに見えなくもないが、まあ、気のせいと言うほうが良い。</p>
<hr>
<h2 id="VIX指数の推移"><a href="#VIX指数の推移" class="headerlink" title="VIX指数の推移"></a>VIX指数の推移</h2><p>VIX指数の過去の推移を見ると、たまに大きな経済に大きな影響を及ぼすようなことが起きて、VIX指数の値が跳ね上がり、その後、だんだん落ち着くというお馴染みのパターンがある。</p>
<p>VIX指数はS&amp;P５００指数のオプションから計算されるものであり、VIX指数そのものが市場で直接売り買いされるわけでもないが、VIX指数のこの跳ね上がり方のパターンに何か癖を見つけられないものか、少し調べてみたい。</p>
<table border="0"><tr><br><img src="/2017/02/02/vix-autocorr/vix_history.png" title="VIX指数とその日次変化率の推移" width="1200"><br></tr></table>

<h2 id="ハースト指数"><a href="#ハースト指数" class="headerlink" title="ハースト指数"></a>ハースト指数</h2><p>まず、はじめに、VIX指数の日次の終値を用いてハースト指数を計算してみる。ハースト指数は、その値が0.5のときにはランダムな動きであることを示し、0.5より大きければ一定の方向性が持続していること、逆に0.5より小さければ反転しやすいことを示す。株価のハースト指数による分析を行った論文では、主な銘柄でハースト指数が0.5より少し大きく、また、ハースト指数が大きい場合にモメンタム戦略が有効であるというようなものを見かける。</p>
<p>pythonのnoldsというライブラリを用いて、ハースト指数の計算期間を色々と変えて、VIX指数のチャートと重ねてみた。下の各チャートの薄い赤線が、ハースト指数で、左目盛がその値である。まず計算して明らかなのは、計算期間が短いと、ちゃんとしたハースト指数の推定ができないということである。左上の観測期間48日のものは推定値が低すぎるように思われるし、それより期間の長い右上の64日のものでもハースト指数が本来0から1の間の値を取るものなのにもかかわらず、適切な計算ができず、下の観測期間128日や256日の計算で、ようやくそれらしい感じとなっている。これは使用したライブラリ固有の問題というよりは、計算アルゴリズムの性質からやむを得ないものと思われる。</p>
<table border="0"><tr><br><img src="/2017/02/02/vix-autocorr/daily_hurst.png" title="日次計算したハースト指数の推移" width="1200"><br></tr></table>

<p>では、ここで、データ数を増やすために、正確な方法ではないことを承知で、VIX指数の日次の終値に加えて、始値も合わせて用いてみよう。そうすると、48日や64日のチャートがそれらしいものになるが、128日や256日のチャートの形にも違いが現れる。始値のデータを加えたために形が変わったのか、データが増えたために形が変わったのかはわからない。</p>
<p>VIX指数の年に数回は跳ね上がるので、ハースト指数の観測期間は短いほうが妥当性がわかりやすいし、また利用価値が高いものと考えられる。そこで、仮に始値と終値の双方を使って計算しても本質的には指し示す意味が同様だと仮定して、どの程度まで短い期間で計算可能か試すこととする。</p>
<p>その結果、始値と終値の両方を用いての日次計算をしてみると、20日では計算不能、25日は数値が異常に小さく、30日はまだ１を超えるケースが散見されるため信頼感に乏しく、35日でようやくそれらしくなるということが分かった。</p>
<table border="0"><tr><br><img src="/2017/02/02/vix-autocorr/daily_oc_hurst.png" title="始値と終値で計算したハースト指数の推移" width="1200"><br></tr></table>

<p>最後に、始値と終値に加えて、高値と安値も加えて日次データを作って、ハースト指数の計算をすることにした。始値と終値は時系列的には適切に並べられるが、高値と安値はそうではない。しかし、ここでは、始値、高値、安値、終値の順番に価格変化が起こるものと乱暴に仮定する。<br>その結果の印象は、良とは到底言えないが、それほどには悪くない。数値の高いところはVIX指数がトレンドっぽく、低いところは反転したりレンジにあったりする傾向があるような感じに見えなくもない。何かの指標に使うには心もとないが、じっくり動きを見て見るくらいの価値はあるかもしれない。</p>
<table border="0"><tr><br><img src="/2017/02/02/vix-autocorr/shorter_daily_ohlc_hurst.png" title="始値と高値、安値、終値で計算したハースト指数の推移" width="1200"><br></tr></table>

<p>なお、VIX指数のハースト指数とVIX指数の翌日の変化率の関係を表したのが下記のチャートである。左は横軸に上記の観測期間20日（始値、高値、安値、終値を使用）のハースト指数、縦軸にその翌日までのVIX指数の変化率をプロットしたものである。右のチャートは横軸を当日のハースト指数からその過去５日平均との差にしたものである。<br>ハースト指数が高い時、あるいは、高くなる時のほうが、いくらかVIX指数の変化の幅は大きく、どちらかと言えば上昇しやすい傾向があるように見受けられる。何か大きなイベントが起きて、VIX指数が上昇トレンドに入った時に、勢いづいてVIX指数が上がる時の状況を主に示しているように思われる。</p>
<table border="0"><tr><br><img src="/2017/02/02/vix-autocorr/hurst_sensitivities.png" title="ハースト指数とVIX指数の動きの相関" width="1200"><br></tr></table>

<h2 id="最大リアプノフ指数"><a href="#最大リアプノフ指数" class="headerlink" title="最大リアプノフ指数"></a>最大リアプノフ指数</h2><p>今度は、ハースト指数と同様に、最大リアプノフ指数を求めてみる。最大リアプノフ指数が正の値を取るときには、原系列にカオス性があることを意味する。<br>その計算結果が、下のとおりである。期間が短いものでは、ハースト指数同様、計算中にエラーが多発した。また、残念ながら、一見する限り、このまま何か活用できるような印象を受けなかった。</p>
<table border="0"><tr><br><img src="/2017/02/02/vix-autocorr/lyapnov.png" title="リアプノフ指数の推移" width="1200"><br></tr></table>

<p>左は観測期間48日のリアプノフ指数を横軸とし、翌日のVIX指数の変化率を縦軸にしたもの、右は256日のリアプノフ指数の5日平均からの乖離を横軸にしたものである。特筆するような特徴はなさそうである。</p>
<table border="0"><tr><br><img src="/2017/02/02/vix-autocorr/lyapnov_sensitivity.png" title="リアプノフ指数とVIX指数の動きの相関" width="1200"><br></tr></table>

<h2 id="自己相関"><a href="#自己相関" class="headerlink" title="自己相関"></a>自己相関</h2><p>次に、VIX指数のデータ系列全体に対して自己相関と偏自己相関を計算したものが下記のチャートである。偏自己相関を見ると、１次のラグ（当日と前日の関係）までしか大きな関係はなく、過去の影響が急速に減少していることが分かる。<br>これまでと同じように、観測期間を変えて、偏自己相関の１次のラグの時系列の変化を追うと以下のようになる。ハースト指数やリアプノフ指数とは違い、観測期間が少なくても計算できるので、最短の観測期間を営業日８日とした。</p>
<table border="0"><tr><br><img src="/2017/02/02/vix-autocorr/autocorrelation.png" title="自己相関と偏自己相関" width="1200"><br></tr></table>

<p>偏自己相関の値が小さくなったところで、VIX指数が反転する傾向があるように見える。観測期間が８日のものでは、偏自己相関が-0.2より小さくなってくると反転が近い印象があるが、観測期間が長くなればなるほど、VIX指数が判定する偏自己相関のレベルが分かりにくくなる。そこで、観測期間をさらに短くして比べてみることにする。</p>
<table border="0"><tr><br><img src="/2017/02/02/vix-autocorr/shortterm_autocorrelation.png" title="偏自己相関の推移" width="1200"><br></tr></table>

<p>偏自己相関がVIX指数の反転を示すシグナルとして使えそうに見えなくもないので、色々試してみると、偏自己相関が低く、かつ、VIX指数のYang-Zhangボラティリティが低い時に意味の有りそうな傾向が見つかった。しかし、該当する事象が少ないのと、偏自己相関を持ちださなくても同様の傾向が見られそうであることから、それ以上の検討は打ち切りとした。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.gif"
               alt="fanannan" />
          <p class="site-author-name" itemprop="name">fanannan</p>
          <p class="site-description motion-element" itemprop="description">メモ書きです</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">7</span>
              <span class="site-state-item-name">記事</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              
                <span class="site-state-item-count">9</span>
                <span class="site-state-item-name">カテゴリー</span>
              
            </div>
          

          
            <div class="site-state-item site-state-tags">
              
                <span class="site-state-item-count">9</span>
                <span class="site-state-item-name">タグ</span>
              
            </div>
          

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="http://github.com/fanannan" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://twitter.com/fanannan" target="_blank" title="Twitter">
                  
                    <i class="fa fa-fw fa-twitter"></i>
                  
                  Twitter
                </a>
              </span>
            
          
        </div>

        
        

        
        

        


      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">fanannan</span>
</div>



        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  



  




	




  
  

  
  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  


  

  

  


</body>
</html>
